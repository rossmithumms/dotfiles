# NOTE HISTORY
# 2018-12-16

## INSTALLS
 - [Vundle](https://github.com/VundleVim/Vundle.vim)
   - [Tabular](https://github.com/godlygeek/tabular)
   - [Vim Markdown](https://github.com/gabrielelana/vim-markdown)
   - [Vim Markdown, Plasticboy](https://github.com/plasticboy/vim-markdown) 

## NOTES
 - Getting more serious about using tmux and vim to structure my workflow today!
 - Needed the break to be selfish and compute **my wayyy~**
 - OK, Tabular looks gorgeous.  Vundle and Tabular are both installed now; :Tab/| should align:

## TABULAR TEST
| My        | name    | is    | mud     |
| My        | friends | don't | care    |
| When      | I       | go    | without |
| Underwear |
 
## MARKDOWN TEST
 - I'm less impressed with gabrielelana's vim-markdown highlighter; plasticboy seems to have
   a more subscribed one.
 - ... Switching in vundle...
 - So far the plasticboy version looks great.  I am just struggling with `C-i cr` for opening a newline versus just `o`.  I found a key mapping to jump to start or end of line while in insert mode, going to try that out now.
 - Perfect!  Adding new entries to this file is as simple as `G i C-e cr`. ... That must look insane to anyone who may read this.  Oh well.

# 2018-12-17

## INSTALLS
 - ~/.vimrc/syntax highlighting

## KPMP-530
 - Had to clean house on `kpmp-dvc2`; purged a bunch of old kernel update versions in `/boot` so I could install `zip` and upload to delphinus-dev
 - Transferred to dev.  Testing locally...
 - Wow, testing locally ended up being a pain.  I had to re-create the patients.json collection, generate UUIDs for each WSI, and all the format-munging involved.
 - This is exactly the kind of process that is tedious to do manually, tedious to script, but once scripted is magically automatic.  We need to get there badly.
 - Cleaning up my intermediate work in wsi-pipeline now...
 - Aaand done

## KPMP-554, Started
 - Venn Diagram component timebox
 - 30m spent on reviewing D3 concepts, layout implementations (see today's reading)
 - Looks like a combination of the venn.js library for layout and the built-in histogram component will serve our needs for the Atlas v0.01

## KPMP-545, Done
 - Create project repo with empty web project
 - Done

## KPMP-546, Done
 - Create a minimal docker-compose for the project
 - Done

## KPMP-546, Done
 - Create minimal docker-compose in heavens-docker for microscopium
 - Done

## KPMP-547, Done
 - Create a minimal nephron page
 - Done

## KPMP-548, Done
 - Create a minimal dataviz page
 - Done

## KPMP-549, Started
 - Implement state with redux to retain information on navigation
 - Putting down until I have better digested Raji data for state model

# 2018-12-18

## KPMP-549, Hold
 - Redux state navigation between schematic and dataviz pages

## KPMP-551, Almost Done
 - Parse the Raji data to something usable
 - EOD 12/18, a working wsi-worker repository is generating usable JSON!
 - All I'm missing is the set generation function - doing that now.

### MICROSCOPIUM-WORKER
 - [json-simple](https://code.google.com/archive/p/json-simple/downloads)
 - There are many genes to many clusters.
 - Per gene and per cluster there are 1 pVal and 1 avgLogFc.
 - Data interrogation goals
   - Make it easy to show agreement and disagreement
     - Which genes are in which cells according to each TIS
   - Make it easy to see where we guessed on associations
     - Cell types to nephron schematic structures
   - Make it easy to see where we did not guess
     - Cell types that did not fit nephron schematic structures

### MICROSCOPIUM DATA MODEL
#### SCHEMATIC MAP (READ)
|InVision Structure|InVision Cell Type|Schema Cell Type|UMICH Cluster Name|UCDSF Cluster Name|UCSD Cluster Name|Meta|

#### GENE TO CELL MAP, PER TIS (READ)
|Gene|PValAdj|AvgLogFc|Cell|

#### CELL TO GENE MAP (GEN)
 - Index: Invision Cell Type
 - Contents: array of unique Gene Names with their p values by TIS

#### GENE TO CELL MAP (GEN)
 - Index: Gene Name
 - Contents: array of unique Invision Cell Types with their p values by TIS

### MICROSCOPIUM GRAPHING STRATEGY
#### VENN DIAGRAM
 - Given an Invision Cell Type, retrieve contents from Cell to Gene Map
 - With each gene, iterate to count by each set and intersection, yielding this data structure below.

{
  cells: {
    InVisionCellType1: {
      sets: [
        { sets: ['UMICH SC'], size: 100 },
        { sets: ['USCD SN'], size: 100 },
        { sets: ['UCSF SC'], size: 100 },
        { sets: ['UMICH SC', 'USCD SN'], size: 100 },
        { sets: ['UMICH SC', 'UCSF SC'], size: 100 },
        { sets: ['USCD SN', 'UCSF SC'], size: 100 },
        { sets: ['UMICH SC', 'UCSF SN', 'UCSF SC', size: 100] }
      ],
      rows: {
        Gene1: { gene: 'Gene1', cVal: 8.2, 'UMICH SC': 0.01, 'UCSF SC': 0.005, 'USCD SN': false },
        Gene2: { gene: 'Gene2', cVal: 8.2, 'UMICH SC': 0.01, 'UCSF SC': 0.005, 'USCD SN': false },
	Gene3: { ... }
	}
    },
    InVisionCellType2: { ... }
  },

  genes: {
    Gene1: {
      rows: [
        { cell: 'InVisionCellType1', 'UMICH SC': 0.01, 'UCSF SC': 0.005, 'USCD SN': false  },
        { cell: 'InVisionCellType2', 'UMICH SC': 0.01, 'UCSF SC': 0.005, 'USCD SN': false  },
	{ ... }
      ]
    }
  }
}

# 2018-12-19
## KPMP-551, Done
 - Writing Venn.js set generators in microscopium-woker...
 - Took a bit more down and dirty lodash than I anticipated but it is now done

## KPMP-550, Done
 - Generate JSON mapping the structures to cell types
 - Creating mapping...
 - Created!

## KPMP-549, Done
 - Adding linkage from schematic page to datavzi page.
 - This is tricky, as it involves implementing all my actions, reducers, and containers for redux to behave.
 - Most of the way there already...  I have toggleable state working, but not rendering on the page...
 - ... Aaand done. Redux fully implemented to the extent I should need.  State is now passing cell selection and site selections.

## KPMP-563, Started
 - Implement data table for selected cell genes
 - The JSON should be drop-in good behavior...  Testing out now with super minimal react table...
 - ... Minimal react table sort method implemented, columns implemented - works out of the box.  Gorgeous.  Still a few more decoration features and above-the-fold sizing to do.

# 2018-12-20

